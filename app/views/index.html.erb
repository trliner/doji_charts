<%
  x_max = @data.count + 1
  y_min, y_max = y_min_and_max(@data)
%>
<canvas id="dojiCanvas" width="800" height="600">[No canvas support]</canvas>

<script>
    window.onload = function () {
      dojiChart = new RGraph.Scatter('dojiCanvas', <%= @data.to_json %>);

      dojiChart.Set('chart.title', <%= @chart_title.to_json %>);
      dojiChart.Set('chart.labels', <%= @labels.to_json %>);

      dojiChart.Set('chart.gutter', 45);
      dojiChart.Set('chart.background.grid.autofit', true);
      dojiChart.Set('chart.boxplot.width', 15);
      dojiChart.Set('chart.scale.decimals', 2);
      dojiChart.Set('chart.text.angle', 45);
      dojiChart.Set('chart.crosshairs', true);

      dojiChart.Set('chart.xmax', <%= x_max %>);
      dojiChart.Set('chart.background.grid.autofit.numvlines', <%= x_max %>);
      dojiChart.Set('chart.xticks', false);

      dojiChart.Set('chart.ymax', <%= y_max %>);
      dojiChart.Set('chart.ymin', <%= y_min %>);
      dojiChart.Set('chart.background.grid.autofit.numhlines', <%= Doji::H_LINES %>);

      dojiChart.Draw();
    }
</script>